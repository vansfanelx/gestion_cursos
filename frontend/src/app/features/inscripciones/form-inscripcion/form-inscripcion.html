<div class="form-container">
  <div class="form-header">
    <h1>{{ isEditMode ? '✏️ Editar Inscripción' : '➕ Nueva Inscripción' }}</h1>
  </div>

  @if (error) {
    <div class="alert-error">
      {{ error }}
    </div>
  }

  <form [formGroup]="inscripcionForm" (ngSubmit)="onSubmit()" class="inscripcion-form">
    <div class="form-grid">
      <div class="form-group">
        <label for="estudiante_id">Estudiante *</label>
        <select 
          id="estudiante_id" 
          formControlName="estudiante_id"
          class="form-control"
          [class.invalid]="inscripcionForm.get('estudiante_id')?.invalid && inscripcionForm.get('estudiante_id')?.touched"
        >
          <option value="">Seleccione un estudiante</option>
          @for (estudiante of estudiantes; track estudiante.id) {
            <option [value]="estudiante.id">{{ estudiante.name }}</option>
          }
        </select>
        @if (inscripcionForm.get('estudiante_id')?.invalid && inscripcionForm.get('estudiante_id')?.touched) {
          <span class="error-text">El estudiante es requerido</span>
        }
      </div>

      <div class="form-group">
        <label for="curso_id">Curso *</label>
        <select 
          id="curso_id" 
          formControlName="curso_id"
          class="form-control"
          [class.invalid]="inscripcionForm.get('curso_id')?.invalid && inscripcionForm.get('curso_id')?.touched"
        >
          <option value="">Seleccione un curso</option>
          @for (curso of cursos; track curso.id) {
            <option [value]="curso.id">{{ curso.nombre }}</option>
          }
        </select>
        @if (inscripcionForm.get('curso_id')?.invalid && inscripcionForm.get('curso_id')?.touched) {
          <span class="error-text">El curso es requerido</span>
        }
      </div>

      <div class="form-group">
        <label for="estado">Estado *</label>
        <select 
          id="estado" 
          formControlName="estado"
          class="form-control"
        >
          <option value="inscrito">Inscrito</option>
          <option value="en_progreso">En Progreso</option>
          <option value="completado">Completado</option>
          <option value="abandonado">Abandonado</option>
        </select>
      </div>

      <div class="form-group">
        <label for="nota_final">Nota Final</label>
        <input 
          type="number" 
          id="nota_final" 
          formControlName="nota_final"
          class="form-control"
          min="0"
          max="20"
          step="0.5"
          placeholder="0.00"
        />
      </div>
    </div>

    <div class="form-actions">
      <button type="button" class="btn-cancel" (click)="cancelar()" [disabled]="loading">
        Cancelar
      </button>
      <button type="submit" class="btn-submit" [disabled]="loading">
        @if (loading) {
          <span class="spinner-small"></span>
          Guardando...
        } @else {
          {{ isEditMode ? 'Actualizar' : 'Crear' }} Inscripción
        }
      </button>
    </div>
  </form>
</div>
