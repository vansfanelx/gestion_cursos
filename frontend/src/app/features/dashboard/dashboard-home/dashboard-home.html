<div class="dashboard-content">
  <!-- Welcome Section -->
  <div class="welcome-section">
    <h1 class="page-title">
      @if (userRole === 'estudiante') {
        ğŸ‘¨â€ğŸ“ Mi Campus Virtual
      } @else if (userRole === 'profesor') {
        ğŸ‘¨â€ğŸ« Panel de Profesor
      } @else if (userRole === 'admin') {
        ğŸ›¡ï¸ Panel de AdministraciÃ³n
      } @else {
        Dashboard Principal
      }
    </h1>
    <p class="page-subtitle">
      Bienvenido/a, <strong>{{ currentUser?.name }}</strong>
    </p>
  </div>

  @if (loading) {
    <div class="loading">
      <div class="spinner"></div>
      <p>Cargando informaciÃ³n...</p>
    </div>
  } @else {
    <!-- Vista de ESTUDIANTE -->
    @if (userRole === 'estudiante') {
      <div class="estudiante-view">
        <!-- Stats Cards -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">ğŸ“š</div>
            <div class="stat-content">
              <h3>Cursos Activos</h3>
              <p class="stat-value">{{ misInscripciones.length }}</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">âœ…</div>
            <div class="stat-content">
              <h3>Completados</h3>
              <p class="stat-value">{{ (misInscripciones | filter: 'estado': 'completado').length }}</p>
            </div>
          </div>
          <div class="stat-card clickable" (click)="verCursosDisponibles()">
            <div class="stat-icon">ğŸ¯</div>
            <div class="stat-content">
              <h3>InscrÃ­bete</h3>
              <p class="stat-value">Ver Cursos</p>
            </div>
            <div class="stat-arrow">â†’</div>
          </div>
        </div>

        <!-- Mis Cursos -->
        <div class="section">
          <h2 class="section-title">Mis Cursos Inscritos</h2>
          <div class="courses-list">
            @for (inscripcion of misInscripciones; track inscripcion.id) {
              <div class="course-item">
                <div class="course-icon">ğŸ“š</div>
                <div class="course-info">
                  <h3>{{ inscripcion.curso?.nombre }}</h3>
                  <p class="course-profesor">
                    ğŸ‘¨â€ğŸ« {{ inscripcion.curso?.profesor?.name }}
                  </p>
                  <p class="course-duration">â±ï¸ {{ inscripcion.curso?.duracion }} horas</p>
                </div>
                <div class="course-status">
                  <span class="badge" [ngClass]="getEstadoBadgeClass(inscripcion.estado)">
                    {{ getEstadoTexto(inscripcion.estado) }}
                  </span>
                  @if (inscripcion.nota_final) {
                    <p class="nota">Nota: {{ inscripcion.nota_final }}/20</p>
                  }
                </div>
              </div>
            } @empty {
              <div class="empty-state">
                <p>No tienes cursos inscritos aÃºn</p>
                <button class="btn-primary" (click)="verCursosDisponibles()">
                  Ver Cursos Disponibles
                </button>
              </div>
            }
          </div>
        </div>
      </div>
    }

    <!-- Vista de PROFESOR -->
    @if (userRole === 'profesor') {
      <div class="profesor-view">
        <!-- Stats Cards -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">ğŸ“š</div>
            <div class="stat-content">
              <h3>Mis Cursos</h3>
              <p class="stat-value">{{ misCursos.length }}</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ‘¥</div>
            <div class="stat-content">
              <h3>Estudiantes</h3>
              <p class="stat-value">{{ totalEstudiantes }}</p>
            </div>
          </div>
          <div class="stat-card clickable" (click)="navigateTo('/inscripciones')">
            <div class="stat-icon">ğŸ“</div>
            <div class="stat-content">
              <h3>Gestionar Notas</h3>
              <p class="stat-value">Ver</p>
            </div>
            <div class="stat-arrow">â†’</div>
          </div>
        </div>

        <!-- Mis Cursos -->
        <div class="section">
          <h2 class="section-title">Cursos que Imparto</h2>
          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Curso</th>
                  <th>DescripciÃ³n</th>
                  <th>DuraciÃ³n</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody>
                @for (curso of misCursos; track curso.id) {
                  <tr>
                    <td><strong>{{ curso.nombre }}</strong></td>
                    <td class="text-truncate">{{ curso.descripcion }}</td>
                    <td>{{ curso.duracion }}h</td>
                    <td>
                      <button class="btn-sm btn-primary" (click)="navigateTo('/cursos/' + curso.id)">
                        ğŸ‘ï¸ Ver
                      </button>
                    </td>
                  </tr>
                } @empty {
                  <tr>
                    <td colspan="4" class="text-center">No tienes cursos asignados</td>
                  </tr>
                }
              </tbody>
            </table>
          </div>
        </div>

        <!-- Acciones RÃ¡pidas -->
        <div class="quick-actions">
          <button class="action-btn" (click)="navigateTo('/cursos')">
            <span class="btn-icon">ğŸ“š</span>
            <span class="btn-text">Ver Todos los Cursos</span>
          </button>
          <button class="action-btn" (click)="navigateTo('/usuarios')">
            <span class="btn-icon">ğŸ‘¥</span>
            <span class="btn-text">Gestionar Estudiantes</span>
          </button>
        </div>
      </div>
    }

    <!-- Vista de ADMIN -->
    @if (userRole === 'admin') {
      <div class="admin-view">
        <!-- Stats Cards -->
        <div class="stats-grid">
          <div class="stat-card clickable" (click)="navigateTo('/cursos')">
            <div class="stat-icon">ğŸ“š</div>
            <div class="stat-content">
              <h3>Total Cursos</h3>
              <p class="stat-value">{{ totalCursos }}</p>
            </div>
            <div class="stat-arrow">â†’</div>
          </div>
          <div class="stat-card clickable" (click)="navigateTo('/usuarios')">
            <div class="stat-icon">ğŸ‘¨â€ğŸ«</div>
            <div class="stat-content">
              <h3>Profesores</h3>
              <p class="stat-value">{{ totalProfesores }}</p>
            </div>
            <div class="stat-arrow">â†’</div>
          </div>
          <div class="stat-card clickable" (click)="navigateTo('/usuarios')">
            <div class="stat-icon">ğŸ‘¨â€ğŸ“</div>
            <div class="stat-content">
              <h3>Estudiantes</h3>
              <p class="stat-value">{{ totalAlumnos }}</p>
            </div>
            <div class="stat-arrow">â†’</div>
          </div>
        </div>

        <!-- MÃ³dulos de GestiÃ³n -->
        <div class="section">
          <h2 class="section-title">GestiÃ³n del Sistema</h2>
          <div class="admin-modules">
            <div class="module-card" (click)="navigateTo('/cursos')">
              <div class="module-icon">ğŸ“š</div>
              <h3>Cursos</h3>
              <p>Administrar todos los cursos del sistema</p>
              <button class="btn-module">Gestionar â†’</button>
            </div>
            <div class="module-card" (click)="navigateTo('/usuarios')">
              <div class="module-icon">ğŸ‘¥</div>
              <h3>Usuarios</h3>
              <p>Administrar profesores y estudiantes</p>
              <button class="btn-module">Gestionar â†’</button>
            </div>
            <div class="module-card" (click)="navigateTo('/inscripciones')">
              <div class="module-icon">ğŸ“</div>
              <h3>Inscripciones</h3>
              <p>Ver y gestionar todas las inscripciones</p>
              <button class="btn-module">Gestionar â†’</button>
            </div>
          </div>
        </div>
      </div>
    }
  }

  <!-- Info Card (comÃºn para todos) -->
  <div class="info-section">
    <div class="info-card">
      <div class="info-header">
        <span class="info-icon">â„¹ï¸</span>
        <h3>InformaciÃ³n de Usuario</h3>
      </div>
      <div class="info-body">
        <p><strong>Rol:</strong> <span class="badge badge-primary">{{ userRole }}</span></p>
        <p><strong>Email:</strong> {{ currentUser?.email }}</p>
      </div>
    </div>
  </div>
</div>
